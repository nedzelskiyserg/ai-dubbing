# ðŸŽ¤ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Voice Cloning (Coqui XTTS v2)

## Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

- **Python 3.10+** (Ñ‚ÐµÐºÑƒÑ‰Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ 3.9, Ð½Ð¾ TTS Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ 3.10+)
- Homebrew (Ð´Ð»Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Python 3.11 Ð½Ð° Mac)

## Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸:

```bash
./setup_voice_cloning.sh
```

Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸:
1. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ Ð²ÐµÑ€ÑÐ¸ÑŽ Python
2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ Python 3.11 Ñ‡ÐµÑ€ÐµÐ· Homebrew (ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾)
3. Ð¡Ð¾Ð·Ð´Ð°ÑÑ‚ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ
4. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ Ð²ÑÐµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ (coqui-tts, pydub)
5. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð¾ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÑŒ

## Ð ÑƒÑ‡Ð½Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

Ð•ÑÐ»Ð¸ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚, Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ:

### 1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Python 3.11

```bash
brew install python@3.11
```

### 2. Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

```bash
python3.11 -m venv venv_tts
source venv_tts/bin/activate
```

### 3. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹

```bash
pip install --upgrade pip setuptools wheel

# Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° ÑƒÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ PyTorch Ð¸ Torchaudio (Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‚ÑÑ Ð´Ð»Ñ TTS)
pip install torch torchaudio

# Ð—Ð°Ñ‚ÐµÐ¼ numpy Ð¸ pandas
pip install "numpy>=2.0.2,<2.1.0" "pandas>=2.2.3,<2.3.0"

# Ð˜ Ð½Ð°ÐºÐ¾Ð½ÐµÑ† TTS Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¾Ð¹ codec (Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð´Ð»Ñ PyTorch 2.9+) Ð¸ pydub
pip install "coqui-tts[codec]" pydub
```

### 4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°

```bash
python -c "from TTS.api import TTS; import pydub; print('âœ… Ð’ÑÐµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚!')"
```

## Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ

ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð¼Ð¾Ð´ÑƒÐ»ÑŒ `voice_cloner.py` Ð±ÑƒÐ´ÐµÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸.

Ð•ÑÐ»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ, Ð°ÐºÑ‚Ð¸Ð²Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÐµÐ³Ð¾ Ð¿ÐµÑ€ÐµÐ´ Ð·Ð°Ð¿ÑƒÑÐºÐ¾Ð¼ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ:

```bash
source venv_tts/bin/activate
python src/main.py
```

## ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ

- ÐœÐ¾Ð´ÑƒÐ»ÑŒ `extract_speaker_samples()` Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ **Ð±ÐµÐ· TTS** (Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ pydub)
- ÐœÐ¾Ð´ÑƒÐ»ÑŒ `generate_dubbing()` Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ **TTS** (Python 3.10+)
- ÐŸÑ€Ð¸ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ð¸ TTS Ð¼Ð¾Ð´ÑƒÐ»ÑŒ Ð²Ñ‹Ð´Ð°ÑÑ‚ Ð¿Ð¾Ð½ÑÑ‚Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ Ñ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼Ð¸

## Ð£ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼

### ÐžÑˆÐ¸Ð±ÐºÐ°: "TTS Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½"

1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð²ÐµÑ€ÑÐ¸ÑŽ Python: `python3 --version`
2. Ð•ÑÐ»Ð¸ Python < 3.10, ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Python 3.11: `brew install python@3.11`
3. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ venv Ñ Python 3.11 Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸

### ÐšÐ¾Ð½Ñ„Ð»Ð¸ÐºÑ‚ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ numpy/pandas

TTS Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ð²ÐµÑ€ÑÐ¸Ð¸, WhisperX - Ð½Ð¾Ð²Ñ‹Ðµ. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¸Ð·Ð¾Ð»ÑÑ†Ð¸Ð¸.

### ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð° TTS

Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ `coqui-tts[codec]`, Ð° Ð½Ðµ ÑÑ‚Ð°Ñ€Ñ‹Ð¹ `TTS`:
```bash
pip uninstall TTS
pip install "coqui-tts[codec]"
```

### ÐžÑˆÐ¸Ð±ÐºÐ°: "torchcodec library is required"

Ð”Ð»Ñ PyTorch 2.9+ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ñ Ð¾Ð¿Ñ†Ð¸ÐµÐ¹ `[codec]`:
```bash
pip install "coqui-tts[codec]"
```
